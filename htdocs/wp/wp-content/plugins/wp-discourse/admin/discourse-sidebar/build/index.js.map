{"version":3,"file":"index.js","mappings":"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","sources":["webpack://discourse-sidebar/external window \"ReactJSXRuntime\"","webpack://discourse-sidebar/webpack/bootstrap","webpack://discourse-sidebar/webpack/runtime/compat get default export","webpack://discourse-sidebar/webpack/runtime/define property getters","webpack://discourse-sidebar/webpack/runtime/hasOwnProperty shorthand","webpack://discourse-sidebar/webpack/runtime/make namespace object","webpack://discourse-sidebar/./src/index.js"],"sourcesContent":["module.exports = window[\"ReactJSXRuntime\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/*jshint esversion: 6*/\n/*global pluginOptions*/\n/**\n * Internal block libraries.\n */\n\nconst { __ } = wp.i18n;\nconst { PluginSidebar, PluginSidebarMoreMenuItem } = wp.editor;\nconst { PanelBody } = wp.components;\nconst { Component, Fragment } = wp.element;\nconst { withSelect, withDispatch } = wp.data;\nconst { compose } = wp.compose;\nconst { registerPlugin } = wp.plugins;\n\nconst el = wp.element.createElement;\n\n// See: https://wp.zacgordon.com/2017/12/07/how-to-add-custom-icons-to-gutenberg-editor-blocks-in-wordpress/\nconst iconEl = el( 'img', {\n\twidth: 20,\n\theight: 20,\n\tsrc: pluginOptions.logo,\n\tclass: 'wpdc-logo',\n} );\n\nconst buttonClass =\n\t'components-button is-button is-default is-primary is-large wpdc-button';\nconst activeButtonClass =\n\t'components-button is-button is-default is-primary is-large wpdc-button active';\nconst downArrow = (\n\t<svg\n\t\tclassName={ 'components-panel__arrow' }\n\t\twidth=\"24px\"\n\t\theight=\"24px\"\n\t\tviewBox=\"0 0 24 24\"\n\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\trole=\"img\"\n\t\taria-hidden=\"true\"\n\t\tfocusable=\"false\"\n\t>\n\t\t<g>\n\t\t\t<path fill={ 'none' } d={ 'M0,0h24v24H0V0z' } />\n\t\t</g>\n\t\t<g>\n\t\t\t<path\n\t\t\t\td={ 'M7.41,8.59L12,13.17l4.59-4.58L18,10l-6,6l-6-6L7.41,8.59z' }\n\t\t\t/>\n\t\t</g>\n\t</svg>\n);\n\nconst upArrow = (\n\t<svg\n\t\tclassName={ 'components-panel__arrow' }\n\t\twidth=\"24px\"\n\t\theight=\"24px\"\n\t\tviewBox=\"0 0 24 24\"\n\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\trole=\"img\"\n\t\taria-hidden=\"true\"\n\t\tfocusable=\"false\"\n\t>\n\t\t<g>\n\t\t\t<path fill={ 'none' } d={ 'M0,0h24v24H0V0z' } />\n\t\t</g>\n\t\t<g>\n\t\t\t<path d={ 'M12,8l-6,6l1.41,1.41L12,10.83l4.59,4.58L18,14L12,8z' } />\n\t\t</g>\n\t</svg>\n);\n\nconst tagsFilterRegExp = /[\\/\\?#\\[\\]@!\\$&'\\(\\)\\*\\+,;=\\.%\\\\`^\\s|\\{\\}\"<>]+/;\n\nclass Notification extends Component {\n\trender() {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<ForcePublishMessage\n\t\t\t\t\tforcePublish={ this.props.forcePublish }\n\t\t\t\t\tpublished={ this.props.published }\n\t\t\t\t/>\n\t\t\t\t<StatusMessage statusMessage={ this.props.statusMessage } />\n\t\t\t\t<ErrorMessage publishingError={ this.props.publishingError } />\n\t\t\t\t<DiscoursePermalink\n\t\t\t\t\tdiscoursePermalink={ this.props.discoursePermalink }\n\t\t\t\t/>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nclass ForcePublishMessage extends Component {\n\trender() {\n\t\tif ( this.props.forcePublish && ! this.props.published ) {\n\t\t\treturn (\n\t\t\t\t<p className={ 'wpdc-force-publish-message' }>\n\t\t\t\t\t{ __(\n\t\t\t\t\t\t'The Force Publish option is enabled for your site. All posts published on WordPress will be automatically published to Discourse.',\n\t\t\t\t\t\t'wp-discourse'\n\t\t\t\t\t) }\n\t\t\t\t</p>\n\t\t\t);\n\t\t}\n\t\treturn '';\n\t}\n}\n\nclass StatusMessage extends Component {\n\trender() {\n\t\tconst statusMessage = this.props.statusMessage;\n\n\t\tif ( statusMessage ) {\n\t\t\treturn (\n\t\t\t\t<div className={ 'wpdc-publishing-response success' }>\n\t\t\t\t\t{ statusMessage }\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\t\treturn '';\n\t}\n}\n\nclass ErrorMessage extends Component {\n\trender() {\n\t\tconst publishingError = this.props.publishingError;\n\n\t\tif ( publishingError ) {\n\t\t\tlet message;\n\t\t\tswitch ( publishingError ) {\n\t\t\t\tcase 'deleted_topic':\n\t\t\t\t\tmessage = __(\n\t\t\t\t\t\t'Your post could not be published to Discourse. The associated Discourse topic may have been deleted. ' +\n\t\t\t\t\t\t\t'Unlink the post so that it can be published again.',\n\t\t\t\t\t\t'wp-discourse'\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'Not Found':\n\t\t\t\t\tmessage = __(\n\t\t\t\t\t\t'Your post could not be updated on Discourse. The associated Discourse topic may have been deleted. ' +\n\t\t\t\t\t\t\t'Unlink the post so that it can be published again.',\n\t\t\t\t\t\t'wp-discourse'\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'queued_topic':\n\t\t\t\t\tmessage = __(\n\t\t\t\t\t\t'Your post has been added to the Discourse approval queue. When it has been approved, you will need to link it to Discourse by' +\n\t\t\t\t\t\t\t\"selecting the 'Link to Existing Topic' option.\",\n\t\t\t\t\t\t'wp-discourse'\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'Unprocessable Entity':\n\t\t\t\t\tmessage = __(\n\t\t\t\t\t\t'Your post could not be published to Discourse. There may be an existing Discourse topic that is using its permalink. Try linking the post with that topic.',\n\t\t\t\t\t\t'wp-discourse'\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'Forbidden':\n\t\t\t\t\tmessage = __(\n\t\t\t\t\t\t'Your post could not be published to Discourse. Check that your Discourse Username is set correctly on your WordPress profile page.',\n\t\t\t\t\t\t'wp-discourse'\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tmessage = publishingError;\n\t\t\t}\n\n\t\t\treturn (\n\t\t\t\t<div className={ 'wpdc-publishing-response error' }>\n\t\t\t\t\t{ message }\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\t\treturn '';\n\t}\n}\n\nclass DiscoursePermalink extends Component {\n\trender() {\n\t\tif ( this.props.discoursePermalink ) {\n\t\t\tconst permalink = encodeURI( this.props.discoursePermalink );\n\t\t\tconst link = (\n\t\t\t\t<a\n\t\t\t\t\thref={ permalink }\n\t\t\t\t\tclassName={ 'wpdc-permalink-link' }\n\t\t\t\t\ttarget={ '_blank' }\n\t\t\t\t\trel={ 'noreferrer noopener' }\n\t\t\t\t>\n\t\t\t\t\t{ permalink }\n\t\t\t\t</a>\n\t\t\t);\n\t\t\treturn (\n\t\t\t\t<div className={ 'wpdc-permalink' }>\n\t\t\t\t\t{ __( 'Your post is linked with', 'wp-discourse' ) }{ ' ' }\n\t\t\t\t\t{ link }\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\t\treturn '';\n\t}\n}\n\nclass PublishingOptions extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tthis.handleChange = this.handleChange.bind( this );\n\t}\n\n\thandleChange( e ) {\n\t\tthis.props.handlePublishMethodChange( e.target.value );\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div className={ 'wpdc-publishing-options' }>\n\t\t\t\t<h2 className={ 'wpdc-sidebar-title' }>\n\t\t\t\t\t{ __( 'Publishing Options', 'wp-discourse' ) }\n\t\t\t\t</h2>\n\t\t\t\t<label htmlFor=\"wpdc_publish_option_new_topic\">\n\t\t\t\t\t<input\n\t\t\t\t\t\tid=\"wpdc_publish_option_new_topic\"\n\t\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\t\tname=\"wpdc_publish_options\"\n\t\t\t\t\t\tvalue=\"publish_post\"\n\t\t\t\t\t\tchecked={\n\t\t\t\t\t\t\t'publish_post' === this.props.publishingMethod\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonChange={ this.handleChange }\n\t\t\t\t\t/>\n\t\t\t\t\t{ __( 'New Topic', 'wp-discourse' ) }\n\t\t\t\t</label>\n\t\t\t\t<br />\n\t\t\t\t<label htmlFor=\"wpdc_publish_option_existing_topic\">\n\t\t\t\t\t<input\n\t\t\t\t\t\tid=\"wpdc_publish_option_existing_topic\"\n\t\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\t\tname=\"wpdc_publish_options\"\n\t\t\t\t\t\tvalue=\"link_post\"\n\t\t\t\t\t\tchecked={ 'link_post' === this.props.publishingMethod }\n\t\t\t\t\t\tonChange={ this.handleChange }\n\t\t\t\t\t/>\n\t\t\t\t\t{ __( 'Link to Existing Topic', 'wp-discourse' ) }\n\t\t\t\t</label>\n\t\t\t\t<hr className={ 'wpdc-sidebar-hr' } />\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nclass PublishToDiscourse extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tthis.handleToBePublishedChange =\n\t\t\tthis.handleToBePublishedChange.bind( this );\n\t\tthis.handlePublishChange = this.handlePublishChange.bind( this );\n\t}\n\n\thandleToBePublishedChange( e ) {\n\t\tthis.props.handleToBePublishedChange( e.target.checked );\n\t}\n\n\thandlePublishChange( e ) {\n\t\tthis.props.handlePublishChange( e );\n\t}\n\n\trender() {\n\t\tconst publishToDiscourse = this.props.publishToDiscourse,\n\t\t\tpublishedOnWordPress = 'publish' === this.props.postStatus;\n\n\t\tif ( ! publishedOnWordPress ) {\n\t\t\treturn (\n\t\t\t\t<div className={ 'wpdc-component-panel-body' }>\n\t\t\t\t\t<h2 className={ 'wpdc-sidebar-title' }>\n\t\t\t\t\t\t{ __( 'Publish to Discourse', 'wp-discourse' ) }\n\t\t\t\t\t</h2>\n\t\t\t\t\t<div className={ 'wpdc-publish-topic' }>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype=\"checkBox\"\n\t\t\t\t\t\t\tclassName={ 'wpdc-publish-topic-checkbox' }\n\t\t\t\t\t\t\tchecked={ publishToDiscourse }\n\t\t\t\t\t\t\tonChange={ this.handleToBePublishedChange }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{ __( 'Publish', 'wp-discourse' ) }\n\t\t\t\t\t\t<p className={ 'wpdc-info' }>\n\t\t\t\t\t\t\t{ __(\n\t\t\t\t\t\t\t\t'Automatically publish the post to Discourse when it is published on WordPress.',\n\t\t\t\t\t\t\t\t'wp-discourse'\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\t\treturn (\n\t\t\t<div className={ 'wpdc-component-panel-body' }>\n\t\t\t\t<h2 className={ 'wpdc-sidebar-title' }>\n\t\t\t\t\t{ __( 'Publish to Discourse', 'wp-discourse' ) }\n\t\t\t\t</h2>\n\t\t\t\t<button\n\t\t\t\t\tclassName={\n\t\t\t\t\t\tthis.props.busy ? activeButtonClass : buttonClass\n\t\t\t\t\t}\n\t\t\t\t\tonClick={ this.handlePublishChange }\n\t\t\t\t>\n\t\t\t\t\t{ __( 'Publish to Discourse', 'wp-discourse' ) }\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nclass CategorySelect extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tthis.handleChange = this.handleChange.bind( this );\n\t}\n\n\thandleChange( e ) {\n\t\tthis.props.handleCategoryChange( e.target.value );\n\t}\n\n\trender() {\n\t\tif ( this.props.discourseCategories ) {\n\t\t\tconst cats = Object.values( this.props.discourseCategories );\n\t\t\tconst options = cats.map( ( cat, index ) => (\n\t\t\t\t<option\n\t\t\t\t\tkey={ index }\n\t\t\t\t\tvalue={ cat.id }\n\t\t\t\t\tselected={\n\t\t\t\t\t\tparseInt( this.props.category_id, 10 ) ===\n\t\t\t\t\t\tparseInt( cat.id, 10 )\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\t{ cat.name }\n\t\t\t\t</option>\n\t\t\t) );\n\t\t\treturn (\n\t\t\t\t<div\n\t\t\t\t\tclassName={\n\t\t\t\t\t\t'wpdc-category-select wpdc-component-panel-body'\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\t<h2 className={ 'wpdc-sidebar-title' }>\n\t\t\t\t\t\t{ __( 'Category', 'wp-discourse' ) }\n\t\t\t\t\t</h2>\n\t\t\t\t\t<select\n\t\t\t\t\t\tonChange={ this.handleChange }\n\t\t\t\t\t\tclassName={ 'widefat' }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ options }\n\t\t\t\t\t</select>\n\t\t\t\t\t<hr className={ 'wpdc-sidebar-hr' } />\n\t\t\t\t</div>\n\t\t\t);\n\t\t} else if ( this.props.categoryError ) {\n\t\t\treturn (\n\t\t\t\t<div className={ 'wpdc-api-error error' }>\n\t\t\t\t\t{ __(\n\t\t\t\t\t\t'There was an error returning the category list from Discourse.',\n\t\t\t\t\t\t'discourse-integration'\n\t\t\t\t\t) }\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\t\treturn null;\n\t}\n}\n\nclass LinkToDiscourseTopic extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tthis.state = {\n\t\t\tisBusy: false,\n\t\t\ttopicUrl: null,\n\t\t};\n\n\t\tthis.handleChange = this.handleChange.bind( this );\n\t\tthis.handleClick = this.handleClick.bind( this );\n\t}\n\n\thandleChange( e ) {\n\t\tthis.setState( { topicUrl: e.target.value } );\n\t}\n\n\thandleClick( /*e*/ ) {\n\t\tthis.props.handleLinkTopicClick( this.state.topicUrl );\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div className={ 'wpdc-link-post wpdc-component-panel-body' }>\n\t\t\t\t<h2 className={ 'wpdc-sidebar-title' }>\n\t\t\t\t\t{ __( 'Topic URL', 'wp-discourse' ) }\n\t\t\t\t</h2>\n\t\t\t\t<input\n\t\t\t\t\ttype=\"url\"\n\t\t\t\t\tclassName={ 'widefat wpdc-topic-url-input' }\n\t\t\t\t\tonChange={ this.handleChange }\n\t\t\t\t\tvalue={ this.state.topicUrl }\n\t\t\t\t/>\n\n\t\t\t\t<button\n\t\t\t\t\tclassName={\n\t\t\t\t\t\tthis.props.busy ? activeButtonClass : buttonClass\n\t\t\t\t\t}\n\t\t\t\t\tonClick={ this.handleClick }\n\t\t\t\t>\n\t\t\t\t\t{ __( 'Link With Discourse', 'wp-discourse' ) }\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nclass UnlinkFromDiscourse extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\t\tthis.state = {\n\t\t\tshowPanel: false,\n\t\t};\n\t\tthis.handleClick = this.handleClick.bind( this );\n\t\tthis.togglePanel = this.togglePanel.bind( this );\n\t}\n\n\thandleClick( e ) {\n\t\tthis.props.handleUnlinkFromDiscourseChange( e );\n\t}\n\n\ttogglePanel() {\n\t\tthis.setState( { showPanel: ! this.state.showPanel } );\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div className={ 'wpdc-component-panel-body' }>\n\t\t\t\t<h2 className={ 'wpdc-panel-section-title' }>\n\t\t\t\t\t<button\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\taria-expanded=\"false\"\n\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t'components-button components-panel__body-toggle'\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonClick={ this.togglePanel }\n\t\t\t\t\t>\n\t\t\t\t\t\t<span aria-hidden=\"true\">\n\t\t\t\t\t\t\t{ this.state.showPanel ? upArrow : downArrow }\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t{ __( 'Unlink From Discourse', 'wp-discourse' ) }\n\t\t\t\t\t</button>\n\t\t\t\t</h2>\n\t\t\t\t<div className={ ! this.state.showPanel ? 'hidden' : '' }>\n\t\t\t\t\t<p className={ 'wpdc-info' }>\n\t\t\t\t\t\t{ __(\n\t\t\t\t\t\t\t'Unlinking the post from Discourse will remove all Discourse metadata from the post.',\n\t\t\t\t\t\t\t'wp-discourse'\n\t\t\t\t\t\t) }\n\t\t\t\t\t</p>\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\tthis.props.busy ? activeButtonClass : buttonClass\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonClick={ this.handleClick }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ __( 'Unlink Post', 'wp-discourse' ) }\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nclass UpdateDiscourseTopic extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\t\tthis.state = {\n\t\t\tshowPanel: false,\n\t\t};\n\t\tthis.handleClick = this.handleClick.bind( this );\n\t\tthis.togglePanel = this.togglePanel.bind( this );\n\t}\n\n\ttogglePanel() {\n\t\tthis.setState( { showPanel: ! this.state.showPanel } );\n\t}\n\n\thandleClick( e ) {\n\t\tthis.props.handleUpdateChange( e );\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div className={ 'wpdc-component-panel-body' }>\n\t\t\t\t<h2 className={ 'wpdc-panel-section-title' }>\n\t\t\t\t\t<button\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\taria-expanded=\"false\"\n\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t'components-button components-panel__body-toggle'\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonClick={ this.togglePanel }\n\t\t\t\t\t>\n\t\t\t\t\t\t<span aria-hidden=\"true\">\n\t\t\t\t\t\t\t{ this.state.showPanel ? upArrow : downArrow }\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t{ __( 'Update Discourse Topic', 'wp-discourse' ) }\n\t\t\t\t\t</button>\n\t\t\t\t</h2>\n\t\t\t\t<div className={ ! this.state.showPanel ? 'hidden' : '' }>\n\t\t\t\t\t<p className={ 'wpdc-info' }>\n\t\t\t\t\t\t{ __(\n\t\t\t\t\t\t\t'Update the Discourse topic to the lastest saved version of the post.',\n\t\t\t\t\t\t\t'wp-discourse'\n\t\t\t\t\t\t) }\n\t\t\t\t\t</p>\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\tthis.props.busy ? activeButtonClass : buttonClass\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonClick={ this.handleClick }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ __( 'Update Topic', 'wp-discourse' ) }\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nclass TagTopic extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tthis.state = {\n\t\t\tchosenTags: this.props.tags,\n\t\t\tinputContent: '',\n\t\t\tinputLength: 1,\n\t\t\tmaxTagsExceeded: false,\n\t\t};\n\n\t\tthis.handleKeyPress = this.handleKeyPress.bind( this );\n\t\tthis.handleChange = this.handleChange.bind( this );\n\t\tthis.handleClick = this.handleClick.bind( this );\n\t\tthis.focusInput = this.focusInput.bind( this );\n\t\tthis.keyDown = this.keyDown.bind( this );\n\t}\n\n\tfocusInput( /*e*/ ) {\n\t\tthis.tagInput.focus();\n\t}\n\n\tkeyDown( e ) {\n\t\tif ( e.keyCode === 13 ) {\n\t\t\tthis.tagInput.focus();\n\t\t}\n\t}\n\n\thandleChange( e ) {\n\t\tconst val = e.target.value;\n\t\tthis.setState( {\n\t\t\tinputContent: ',' === val ? '' : val,\n\t\t\tinputLength: val.length === 0 ? 1 : val.length,\n\t\t} );\n\t}\n\n\thandleKeyPress( e ) {\n\t\tconst keyVal = e.key;\n\t\tlet val = e.target.value;\n\n\t\tif ( 'Enter' === keyVal || ',' === keyVal ) {\n\t\t\tlet currentChoices = this.state.chosenTags;\n\t\t\tif ( currentChoices.length >= this.props.maxTags ) {\n\t\t\t\tthis.setState( {\n\t\t\t\t\tmaxTagsExceeded: true,\n\t\t\t\t\tinputContent: '',\n\t\t\t\t} );\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tval = this.cleanTag( val );\n\n\t\t\tif ( val.length ) {\n\t\t\t\tcurrentChoices.push( val );\n\t\t\t\tcurrentChoices = TagTopic.sanitizeArray( currentChoices );\n\t\t\t\tthis.setState(\n\t\t\t\t\t{\n\t\t\t\t\t\tchosenTags: currentChoices,\n\t\t\t\t\t\tinputContent: '',\n\t\t\t\t\t},\n\t\t\t\t\t() => {\n\t\t\t\t\t\tthis.props.handleTagChange( currentChoices );\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tthis.setState( {\n\t\t\t\t\tinputContent: '',\n\t\t\t\t} );\n\t\t\t}\n\t\t}\n\t}\n\n\t// see discourse/lib/discourse_tagging.rb#clean_tag\n\tcleanTag( val ) {\n\t\tval = val.trim(); // remove surrounding whitespace\n\t\tval = val.replace( / /g, '-' ); // replace whitespace with hyphen\n\t\tval = val.replace( /(-)\\1+/g, '-' ); // remove duplicate hyphens\n\t\tval = val.replace( new RegExp( tagsFilterRegExp, 'g' ), '' ); // remove special characters\n\t\treturn val;\n\t}\n\n\thandleClick( key ) {\n\t\tconst tags = this.state.chosenTags;\n\t\tconst index = tags.indexOf( key );\n\t\tif ( index > -1 ) {\n\t\t\ttags.splice( index, 1 );\n\t\t\tthis.setState(\n\t\t\t\t{\n\t\t\t\t\tchosenTags: tags,\n\t\t\t\t\tmaxTagsExceeded: false,\n\t\t\t\t},\n\t\t\t\t() => {\n\t\t\t\t\tthis.props.handleTagChange( tags );\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t}\n\n\tstatic sanitizeArray( arr ) {\n\t\tarr = arr.sort().reduce( ( accumulator, current ) => {\n\t\t\tconst length = accumulator.length;\n\t\t\tif (\n\t\t\t\t( 0 === length || accumulator[ length - 1 ] !== current ) &&\n\t\t\t\tcurrent.trim() !== ''\n\t\t\t) {\n\t\t\t\taccumulator.push( current );\n\t\t\t}\n\t\t\treturn accumulator;\n\t\t}, [] );\n\t\treturn arr;\n\t}\n\n\trender() {\n\t\tif ( this.props.allowTags ) {\n\t\t\tconst maxTagsNotice = this.state.maxTagsExceeded\n\t\t\t\t? __(\n\t\t\t\t\t\t'You have exceeded the maximum number of allowed tags for your site. Remove a tag to add more.',\n\t\t\t\t\t\t'wp-discourse'\n\t\t\t\t  )\n\t\t\t\t: '';\n\t\t\tlet tagDisplay = TagTopic.sanitizeArray( this.state.chosenTags );\n\t\t\ttagDisplay = tagDisplay.map( ( tag ) => (\n\t\t\t\t<span\n\t\t\t\t\tclassName={ 'components-form-token-field__token' }\n\t\t\t\t\tkey={ tag }\n\t\t\t\t>\n\t\t\t\t\t<span\n\t\t\t\t\t\tclassName={ 'components-form-token-field__token-text' }\n\t\t\t\t\t>\n\t\t\t\t\t\t<span className={ 'screen-reader-text' }>{ tag }</span>\n\t\t\t\t\t\t<span aria-hidden=\"true\">{ tag }</span>\n\t\t\t\t\t</span>\n\t\t\t\t\t<button\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\taria-label=\"Remove Tag\"\n\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t'components-button components-icon-button components-form-token-field__remove-token'\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonClick={ this.handleClick.bind( this, tag ) }\n\t\t\t\t\t\tkey={ tag }\n\t\t\t\t\t>\n\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\t\t\trole=\"img\"\n\t\t\t\t\t\t\tfocusable=\"false\"\n\t\t\t\t\t\t\tclassName={ 'dashicon dashicons-dismiss' }\n\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\twidth=\"20\"\n\t\t\t\t\t\t\theight=\"20\"\n\t\t\t\t\t\t\tviewBox=\"0 0 20 20\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\td={\n\t\t\t\t\t\t\t\t\t'M10 2c4.42 0 8 3.58 8 8s-3.58 8-8 8-8-3.58-8-8 3.58-8 8-8zm5 11l-3-3 3-3-2-2-3 3-3-3-2 2 3 3-3 3 2 2 3-3 3 3z'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</button>\n\t\t\t\t</span>\n\t\t\t) );\n\t\t\treturn (\n\t\t\t\t<div className={ 'wpdc-component-panel-body' }>\n\t\t\t\t\t<h2 className={ 'wpdc-sidebar-title' }>\n\t\t\t\t\t\t{ __( 'Tags', 'wp-discourse' ) }\n\t\t\t\t\t</h2>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t'components-form-token-field__input-container'\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonClick={ this.focusInput }\n\t\t\t\t\t\tonKeyDown={ this.keyDown }\n\t\t\t\t\t\trole=\"combobox\"\n\t\t\t\t\t\ttabIndex={ 0 }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ tagDisplay }\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype={ 'text' }\n\t\t\t\t\t\t\tsize={ this.state.inputLength }\n\t\t\t\t\t\t\tclassName={ 'components-form-token-field__input' }\n\t\t\t\t\t\t\tonChange={ this.handleChange }\n\t\t\t\t\t\t\tonKeyPress={ this.handleKeyPress }\n\t\t\t\t\t\t\tvalue={ this.state.inputContent }\n\t\t\t\t\t\t\tref={ ( input ) => {\n\t\t\t\t\t\t\t\tthis.tagInput = input;\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\tthis.state.maxTagsExceeded ? 'wpdc-info' : ''\n\t\t\t\t\t\t}\n\t\t\t\t\t>\n\t\t\t\t\t\t{ maxTagsNotice }\n\t\t\t\t\t</div>\n\t\t\t\t\t<hr className={ 'wpdc-sidebar-hr' } />\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\t\treturn null;\n\t}\n}\n\nclass PinTopic extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tthis.state = {\n\t\t\tpinTopic: this.props.pinTopic,\n\t\t\tpinUntil: this.props.pinUntil,\n\t\t};\n\n\t\tthis.handleUpdateDate = this.handleUpdateDate.bind( this );\n\t\tthis.handleToBePinnedChange = this.handleToBePinnedChange.bind( this );\n\t}\n\n\thandleUpdateDate( e ) {\n\t\tthis.setState( { pinUntil: e.target.value } );\n\t\tthis.props.handlePinChange( this.state.pinTopic, e.target.value );\n\t}\n\n\thandleToBePinnedChange( e ) {\n\t\tthis.setState( { pinTopic: e.target.checked } );\n\t\tthis.props.handlePinChange( e.target.checked, this.state.pinUntil );\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div className={ 'wpdc-component-panel-body' }>\n\t\t\t\t<h2 className={ 'wpdc-sidebar-title' }>\n\t\t\t\t\t{ __( 'Pin Topic', 'wp-discourse' ) }\n\t\t\t\t</h2>\n\t\t\t\t<label htmlFor=\"wpdc-pin-topic\">\n\t\t\t\t\t<input\n\t\t\t\t\t\tid=\"wpdc-pin-topic\"\n\t\t\t\t\t\ttype={ 'checkbox' }\n\t\t\t\t\t\tonChange={ this.handleToBePinnedChange }\n\t\t\t\t\t\tchecked={ this.state.pinTopic }\n\t\t\t\t\t/>\n\t\t\t\t\t{ __( 'Pin Discourse Topic', 'wp-discourse' ) }\n\t\t\t\t</label>\n\t\t\t\t<br />\n\t\t\t\t<label\n\t\t\t\t\tclassName={ 'wpdc-pin-until-input' }\n\t\t\t\t\thtmlFor=\"wpdc-pin-topic-until\"\n\t\t\t\t>\n\t\t\t\t\t{ __( 'Pin Until', 'wp-discourse' ) }\n\t\t\t\t\t<br />\n\t\t\t\t\t<input\n\t\t\t\t\t\tid=\"wpdc-pin-topic-until\"\n\t\t\t\t\t\ttype={ 'date' }\n\t\t\t\t\t\tclassName={ 'widefat' }\n\t\t\t\t\t\tonChange={ this.handleUpdateDate }\n\t\t\t\t\t\tvalue={ this.state.pinUntil }\n\t\t\t\t\t/>\n\t\t\t\t</label>\n\t\t\t\t<hr className={ 'wpdc-sidebar-hr' } />\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nclass DiscourseSidebar extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\t\tthis.initializePostMeta();\n\t\tthis.state = this.initializePostState( this.props.post );\n\t\tthis.getDiscourseCategories();\n\n\t\tthis.handleToBePublishedChange =\n\t\t\tthis.handleToBePublishedChange.bind( this );\n\t\tthis.handlePublishChange = this.handlePublishChange.bind( this );\n\t\tthis.handleCategoryChange = this.handleCategoryChange.bind( this );\n\t\tthis.handleTagChange = this.handleTagChange.bind( this );\n\t\tthis.handleUnlinkFromDiscourseChange =\n\t\t\tthis.handleUnlinkFromDiscourseChange.bind( this );\n\t\tthis.handlePublishMethodChange =\n\t\t\tthis.handlePublishMethodChange.bind( this );\n\t\tthis.handleUpdateChange = this.handleUpdateChange.bind( this );\n\t\tthis.handleLinkTopicClick = this.handleLinkTopicClick.bind( this );\n\t\tthis.handlePinChange = this.handlePinChange.bind( this );\n\t}\n\n\tcomponentDidUpdate( prevProps ) {\n\t\tif ( this.isAllowedPostType() ) {\n\t\t\tif (\n\t\t\t\tthis.publishedPostHasChanged( prevProps.post, this.props.post )\n\t\t\t) {\n\t\t\t\tthis.updatePostState( this.props.post );\n\t\t\t}\n\t\t}\n\t}\n\n\tpublishedPostHasChanged( prev, post ) {\n\t\tif ( ! prev || ! post || ! prev.meta || ! post.meta ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// We don't refresh state if post is not yet published\n\t\tif ( [ post.status, prev.status ].every( ( s ) => s !== 'publish' ) ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// We always refresh state on a status change\n\t\tif ( post.status !== prev.status ) {\n\t\t\treturn true;\n\t\t}\n\n\t\t// We refresh state on publishing error or linked post change\n\t\treturn [\n\t\t\t'discourse_post_id',\n\t\t\t'wpdc_publishing_response',\n\t\t\t'wpdc_publishing_error',\n\t\t].some( ( attr ) => post.meta[ attr ] !== prev.meta[ attr ] );\n\t}\n\n\tinitializePostMeta() {\n\t\tif ( ! this.isAllowedPostType() ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// If the post is already published and auto publish option is enabled, set auto publish overridden.\n\t\tif ( this.props.post && this.props.post.status === 'publish' ) {\n\t\t\tthis.props.setAutoPublishOverridden( '1' );\n\t\t}\n\t}\n\n\tinitializePostState( post ) {\n\t\tif ( ! this.isAllowedPostType() ) {\n\t\t\treturn {};\n\t\t}\n\n\t\tlet state = {\n\t\t\tpublished: false,\n\t\t\tpostStatus: '',\n\t\t\tpublishingMethod: 'publish_post',\n\t\t\tforcePublish: pluginOptions.forcePublish,\n\t\t\tpublishToDiscourse: pluginOptions.autoPublish,\n\t\t\tpublishPostCategory: pluginOptions.defaultCategory,\n\t\t\tallowTags: pluginOptions.allowTags,\n\t\t\tmaxTags: pluginOptions.maxTags,\n\t\t\ttopicTags: [],\n\t\t\tpinTopic: false,\n\t\t\tpinUntil: null,\n\t\t\tdiscoursePostId: null,\n\t\t\tdiscoursePermalink: null,\n\t\t\tpublishingError: null,\n\t\t\tbusyUnlinking: false,\n\t\t\tbusyUpdating: false,\n\t\t\tbusyLinking: false,\n\t\t\tbusyPublishing: false,\n\t\t\tstatusMessage: null,\n\t\t\tdiscourseCategories: null,\n\t\t\tcategoryError: false,\n\t\t};\n\n\t\tif ( post && post.meta ) {\n\t\t\tstate = Object.assign( state, this.buildPostState( post ) );\n\t\t}\n\n\t\treturn state;\n\t}\n\n\tupdatePostState( post ) {\n\t\tthis.setState( this.buildPostState( post ) );\n\t}\n\n\tbuildPostState( post ) {\n\t\tif ( ! post || ! post.meta ) {\n\t\t\treturn {};\n\t\t}\n\n\t\tconst meta = post.meta;\n\t\tconst topicTags =\n\t\t\ttypeof meta.wpdc_topic_tags === 'string'\n\t\t\t\t? meta.wpdc_topic_tags.split( ',' )\n\t\t\t\t: [];\n\n\t\tconst postState = {\n\t\t\tpublishToDiscourse: this.determinePublishToDiscourse( meta ),\n\t\t\tpublished: meta.discourse_post_id > 0,\n\t\t\tpostStatus: post.status,\n\t\t\ttopicTags,\n\t\t\tpinTopic: meta.wpdc_pin_topic > 0,\n\t\t};\n\n\t\tif ( meta.publish_post_category > 0 ) {\n\t\t\tpostState.publishPostCategory = meta.publish_post_category;\n\t\t}\n\t\tif ( meta.wpdc_pin_until ) {\n\t\t\tpostState.pinUntil = meta.wpdc_pin_until;\n\t\t}\n\t\tif ( meta.discourse_post_id ) {\n\t\t\tpostState.discoursePostId = meta.discourse_post_id;\n\t\t}\n\t\tif ( meta.discourse_permalink ) {\n\t\t\tpostState.discoursePermalink = meta.discourse_permalink;\n\t\t}\n\t\tif ( meta.wpdc_publishing_error ) {\n\t\t\tpostState.publishingError = meta.wpdc_publishing_error;\n\t\t}\n\n\t\treturn postState;\n\t}\n\n\tdeterminePublishToDiscourse( meta ) {\n\t\tconst autoPublish = pluginOptions.autoPublish,\n\t\t\tautoPublishOverridden =\n\t\t\t\t1 === parseInt( meta.wpdc_auto_publish_overridden, 10 );\n\n\t\tlet publishToDiscourse;\n\n\t\tif (\n\t\t\t[ 'deleted_topic', 'queued_topic' ].includes(\n\t\t\t\tmeta.wpdc_publishing_error\n\t\t\t)\n\t\t) {\n\t\t\tpublishToDiscourse = false;\n\t\t} else if ( autoPublish && ! autoPublishOverridden ) {\n\t\t\tpublishToDiscourse = true;\n\t\t} else {\n\t\t\tpublishToDiscourse =\n\t\t\t\t1 === parseInt( meta.wpdc_publish_to_discourse, 10 );\n\t\t}\n\n\t\treturn publishToDiscourse;\n\t}\n\n\tgetDiscourseCategories() {\n\t\tif ( ! pluginOptions.pluginUnconfigured ) {\n\t\t\twp.apiRequest( {\n\t\t\t\tpath: '/wp-discourse/v1/get-discourse-categories',\n\t\t\t\tmethod: 'GET',\n\t\t\t\tdata: {\n\t\t\t\t\tget_categories_nonce: pluginOptions.get_categories_nonce,\n\t\t\t\t\tid: this.props.postId,\n\t\t\t\t},\n\t\t\t} ).then(\n\t\t\t\t( data ) => {\n\t\t\t\t\tthis.setState( {\n\t\t\t\t\t\tdiscourseCategories: data,\n\t\t\t\t\t} );\n\t\t\t\t},\n\t\t\t\t( /*err*/ ) => {\n\t\t\t\t\tthis.setState( { categoryError: true } );\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t}\n\n\tisAllowedPostType() {\n\t\treturn (\n\t\t\tpluginOptions.allowedPostTypes.indexOf( this.props.post.type ) >= 0\n\t\t);\n\t}\n\n\thandlePublishMethodChange( publishingMethod ) {\n\t\tthis.setState( { publishingMethod } );\n\t}\n\n\thandleToBePublishedChange( publishToDiscourse ) {\n\t\tthis.setState(\n\t\t\t{\n\t\t\t\tpublishToDiscourse,\n\t\t\t\tstatusMessage: '',\n\t\t\t},\n\t\t\t() => {\n\t\t\t\twp.apiRequest( {\n\t\t\t\t\tpath: '/wp-discourse/v1/set-publish-meta',\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tset_publish_meta_nonce:\n\t\t\t\t\t\t\tpluginOptions.set_publish_meta_nonce,\n\t\t\t\t\t\tid: this.props.postId,\n\t\t\t\t\t\tpublish_to_discourse: this.state.publishToDiscourse\n\t\t\t\t\t\t\t? 1\n\t\t\t\t\t\t\t: 0,\n\t\t\t\t\t},\n\t\t\t\t} ).then(\n\t\t\t\t\t( /*data*/ ) => {\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t},\n\t\t\t\t\t( /*err*/ ) => {\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t);\n\t}\n\n\thandleCategoryChange( categoryId ) {\n\t\tthis.setState( { publishPostCategory: categoryId }, () => {\n\t\t\twp.apiRequest( {\n\t\t\t\tpath: '/wp-discourse/v1/set-category-meta',\n\t\t\t\tmethod: 'POST',\n\t\t\t\tdata: {\n\t\t\t\t\tset_category_meta_nonce:\n\t\t\t\t\t\tpluginOptions.set_category_meta_nonce,\n\t\t\t\t\tid: this.props.postId,\n\t\t\t\t\tpublish_post_category: categoryId,\n\t\t\t\t},\n\t\t\t} ).then(\n\t\t\t\t( /*data*/ ) => {\n\t\t\t\t\treturn null;\n\t\t\t\t},\n\t\t\t\t( /*err*/ ) => {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t);\n\t\t} );\n\t}\n\n\thandlePinChange( pinTopic, pinUntil ) {\n\t\tthis.setState(\n\t\t\t{\n\t\t\t\tpinTopic,\n\t\t\t\tpinUntil,\n\t\t\t},\n\t\t\t() => {\n\t\t\t\twp.apiRequest( {\n\t\t\t\t\tpath: '/wp-discourse/v1/set-pin-meta',\n\t\t\t\t\tmethod: 'Post',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tset_pin_meta_nonce: pluginOptions.set_pin_meta_nonce,\n\t\t\t\t\t\tid: this.props.postId,\n\t\t\t\t\t\twpdc_pin_topic: pinTopic ? 1 : 0,\n\t\t\t\t\t\twpdc_pin_until: pinUntil,\n\t\t\t\t\t},\n\t\t\t\t} ).then(\n\t\t\t\t\t( /*data*/ ) => {\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t},\n\t\t\t\t\t( /*err*/ ) => {\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t);\n\t}\n\n\thandleTagChange( tags ) {\n\t\tthis.setState( { topicTags: tags }, () => {\n\t\t\tconst tagString = tags.join( ',' );\n\t\t\twp.apiRequest( {\n\t\t\t\tpath: '/wp-discourse/v1/set-tag-meta',\n\t\t\t\tmethod: 'POST',\n\t\t\t\tdata: {\n\t\t\t\t\tset_tag_meta_nonce: pluginOptions.set_tag_meta_nonce,\n\t\t\t\t\tid: this.props.postId,\n\t\t\t\t\twpdc_topic_tags: tagString,\n\t\t\t\t},\n\t\t\t} ).then(\n\t\t\t\t( /*data*/ ) => {\n\t\t\t\t\treturn null;\n\t\t\t\t},\n\t\t\t\t( /*err*/ ) => {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t);\n\t\t} );\n\t}\n\n\thandleLinkTopicClick( topicUrl ) {\n\t\tthis.setState( {\n\t\t\tbusyLinking: true,\n\t\t\tstatusMessage: '',\n\t\t} );\n\t\twp.apiRequest( {\n\t\t\tpath: '/wp-discourse/v1/link-topic',\n\t\t\tmethod: 'POST',\n\t\t\tdata: {\n\t\t\t\tlink_topic_nonce: pluginOptions.link_topic_nonce,\n\t\t\t\tid: this.props.postId,\n\t\t\t\ttopic_url: topicUrl,\n\t\t\t},\n\t\t} ).then(\n\t\t\t( data ) => {\n\t\t\t\tthis.setState( {\n\t\t\t\t\tbusyLinking: false,\n\t\t\t\t} );\n\n\t\t\t\tif ( data.discourse_permalink ) {\n\t\t\t\t\tthis.setState( {\n\t\t\t\t\t\tpublished: true,\n\t\t\t\t\t\tdiscoursePermalink: data.discourse_permalink,\n\t\t\t\t\t\tpublishingError: null,\n\t\t\t\t\t} );\n\t\t\t\t} else {\n\t\t\t\t\tthis.setState( {\n\t\t\t\t\t\tpublishingError: __(\n\t\t\t\t\t\t\t'There has been an error linking your post with Discourse.',\n\t\t\t\t\t\t\t'wp-discourse'\n\t\t\t\t\t\t),\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t\treturn null;\n\t\t\t},\n\t\t\t( err ) => {\n\t\t\t\tconst message =\n\t\t\t\t\terr.responseJSON && err.responseJSON.message\n\t\t\t\t\t\t? err.responseJSON.message\n\t\t\t\t\t\t: __(\n\t\t\t\t\t\t\t\t'There has been an error linking your post with Discourse.',\n\t\t\t\t\t\t\t\t'wp-discourse'\n\t\t\t\t\t\t  );\n\t\t\t\tthis.setState( {\n\t\t\t\t\tbusyLinking: false,\n\t\t\t\t\tpublished: false,\n\t\t\t\t\tpublishingError: message,\n\t\t\t\t} );\n\t\t\t\treturn null;\n\t\t\t}\n\t\t);\n\t}\n\n\thandleUnlinkFromDiscourseChange( /*e*/ ) {\n\t\tthis.setState( {\n\t\t\tbusyUnlinking: true,\n\t\t\tstatusMessage: '',\n\t\t} );\n\t\twp.apiRequest( {\n\t\t\tpath: '/wp-discourse/v1/unlink-post',\n\t\t\tmethod: 'POST',\n\t\t\tdata: {\n\t\t\t\tunlink_post_nonce: pluginOptions.unlink_post_nonce,\n\t\t\t\tid: this.props.postId,\n\t\t\t},\n\t\t} ).then(\n\t\t\t( /*data*/ ) => {\n\t\t\t\tthis.setState( {\n\t\t\t\t\tbusyUnlinking: false,\n\t\t\t\t\tpublished: false,\n\t\t\t\t\tpublishingMethod: 'link_post',\n\t\t\t\t\tdiscoursePermalink: null,\n\t\t\t\t\tstatusMessage: __(\n\t\t\t\t\t\t'Your post has been unlinked from Discourse.',\n\t\t\t\t\t\t'wp-discourse'\n\t\t\t\t\t),\n\t\t\t\t} );\n\t\t\t\treturn null;\n\t\t\t},\n\t\t\t( /*err*/ ) => {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t);\n\t}\n\n\thandlePublishChange( /*e*/ ) {\n\t\tthis.setState( {\n\t\t\tbusyPublishing: true,\n\t\t\tstatusMessage: '',\n\t\t} );\n\t\twp.apiRequest( {\n\t\t\tpath: '/wp-discourse/v1/publish-topic',\n\t\t\tmethod: 'POST',\n\t\t\tdata: {\n\t\t\t\tpublish_topic_nonce: pluginOptions.publish_topic_nonce,\n\t\t\t\tid: this.props.postId,\n\t\t\t},\n\t\t} ).then(\n\t\t\t( data ) => {\n\t\t\t\tconst success = 'success' === data.publish_response;\n\t\t\t\tthis.setState( {\n\t\t\t\t\tbusyPublishing: false,\n\t\t\t\t\tpublished: success,\n\t\t\t\t\tpublishingError: success ? null : data.publish_response,\n\t\t\t\t\tpublishingMethod: ( data.publish_response =\n\t\t\t\t\t\t'Unprocessable Entity' ? 'link_post' : 'publish_post' ),\n\t\t\t\t\tdiscoursePermalink: data.discourse_permalink,\n\t\t\t\t} );\n\t\t\t\treturn null;\n\t\t\t},\n\t\t\t( err ) => {\n\t\t\t\tconst message =\n\t\t\t\t\terr.responseJSON && err.responseJSON.message\n\t\t\t\t\t\t? err.responseJSON.message\n\t\t\t\t\t\t: __(\n\t\t\t\t\t\t\t\t'There has been an error linking your post with Discourse.',\n\t\t\t\t\t\t\t\t'wp-discourse'\n\t\t\t\t\t\t  );\n\t\t\t\tthis.setState( {\n\t\t\t\t\tbusyPublishing: false,\n\t\t\t\t\tpublished: false,\n\t\t\t\t\tpublishingError: message,\n\t\t\t\t} );\n\t\t\t\treturn null;\n\t\t\t}\n\t\t);\n\t}\n\n\thandleUpdateChange( /*e*/ ) {\n\t\tthis.setState( {\n\t\t\tbusyUpdating: true,\n\t\t\tstatusMessage: '',\n\t\t} );\n\t\twp.apiRequest( {\n\t\t\tpath: '/wp-discourse/v1/update-topic',\n\t\t\tmethod: 'POST',\n\t\t\tdata: {\n\t\t\t\tupdate_topic_nonce: pluginOptions.update_topic_nonce,\n\t\t\t\tid: this.props.postId,\n\t\t\t},\n\t\t} ).then(\n\t\t\t( data ) => {\n\t\t\t\tconst response = data.update_response,\n\t\t\t\t\tsuccess = 'success' === response;\n\t\t\t\tlet message;\n\t\t\t\tif ( success ) {\n\t\t\t\t\tmessage = __(\n\t\t\t\t\t\t'The Discourse topic has been updated!',\n\t\t\t\t\t\t'wp-discourse'\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tthis.setState( {\n\t\t\t\t\tbusyUpdating: false,\n\t\t\t\t\tstatusMessage: message,\n\t\t\t\t\tpublishingError: success ? null : data.update_response,\n\t\t\t\t} );\n\t\t\t\treturn null;\n\t\t\t},\n\t\t\t( /*err*/ ) => {\n\t\t\t\tconst message = __(\n\t\t\t\t\t'There was an error updating the Discourse topic.',\n\t\t\t\t\t'wp-discourse'\n\t\t\t\t);\n\t\t\t\tthis.setState( {\n\t\t\t\t\tbusyUpdating: false,\n\t\t\t\t\tstatusMessage: message,\n\t\t\t\t} );\n\t\t\t\treturn null;\n\t\t\t}\n\t\t);\n\t}\n\n\trender() {\n\t\tif ( this.isAllowedPostType() ) {\n\t\t\tconst isPublished = this.state.published,\n\t\t\t\tforcePublish = this.state.forcePublish,\n\t\t\t\tpluginUnconfigured = pluginOptions.pluginUnconfigured;\n\t\t\tlet actions;\n\t\t\tif ( pluginUnconfigured ) {\n\t\t\t\tactions = (\n\t\t\t\t\t<div className={ 'wpdc-plugin-unconfigured' }>\n\t\t\t\t\t\t{ __(\n\t\t\t\t\t\t\t\"Before you can publish posts from WordPress to Discourse, you need to configure the plugin's Connection Settings tab.\",\n\t\t\t\t\t\t\t'discourse-integration'\n\t\t\t\t\t\t) }\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t} else if ( ! isPublished && ! forcePublish ) {\n\t\t\t\tactions = (\n\t\t\t\t\t<div className={ 'wpdc-not-published' }>\n\t\t\t\t\t\t<PublishingOptions\n\t\t\t\t\t\t\thandlePublishMethodChange={\n\t\t\t\t\t\t\t\tthis.handlePublishMethodChange\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tpublishingMethod={ this.state.publishingMethod }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{ 'publish_post' === this.state.publishingMethod ? (\n\t\t\t\t\t\t\t<div className={ 'wpdc-publish-to-discourse' }>\n\t\t\t\t\t\t\t\t<CategorySelect\n\t\t\t\t\t\t\t\t\tcategory_id={\n\t\t\t\t\t\t\t\t\t\tthis.state.publishPostCategory\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\thandleCategoryChange={\n\t\t\t\t\t\t\t\t\t\tthis.handleCategoryChange\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tdiscourseCategories={\n\t\t\t\t\t\t\t\t\t\tthis.state.discourseCategories\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tcategoryError={ this.state.categoryError }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<TagTopic\n\t\t\t\t\t\t\t\t\thandleTagChange={ this.handleTagChange }\n\t\t\t\t\t\t\t\t\ttags={ this.state.topicTags }\n\t\t\t\t\t\t\t\t\tallowTags={ this.state.allowTags }\n\t\t\t\t\t\t\t\t\tmaxTags={ this.state.maxTags }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<PinTopic\n\t\t\t\t\t\t\t\t\thandlePinChange={ this.handlePinChange }\n\t\t\t\t\t\t\t\t\tpinTopic={ this.state.pinTopic }\n\t\t\t\t\t\t\t\t\tpinUntil={ this.state.pinUntil }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<PublishToDiscourse\n\t\t\t\t\t\t\t\t\tpostStatus={ this.state.postStatus }\n\t\t\t\t\t\t\t\t\tpublishToDiscourse={\n\t\t\t\t\t\t\t\t\t\tthis.state.publishToDiscourse\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\thandleToBePublishedChange={\n\t\t\t\t\t\t\t\t\t\tthis.handleToBePublishedChange\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\thandlePublishChange={\n\t\t\t\t\t\t\t\t\t\tthis.handlePublishChange\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tbusy={ this.state.busyPublishing }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<div className={ 'wpdc-link-to-discourse' }>\n\t\t\t\t\t\t\t\t<LinkToDiscourseTopic\n\t\t\t\t\t\t\t\t\tbusy={ this.state.busyLinking }\n\t\t\t\t\t\t\t\t\thandleLinkTopicClick={\n\t\t\t\t\t\t\t\t\t\tthis.handleLinkTopicClick\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t} else if ( ! forcePublish ) {\n\t\t\t\tactions = (\n\t\t\t\t\t<div className={ 'wpdc-published-post' }>\n\t\t\t\t\t\t<UpdateDiscourseTopic\n\t\t\t\t\t\t\tpublished={ this.state.published }\n\t\t\t\t\t\t\tbusy={ this.state.busyUpdating }\n\t\t\t\t\t\t\thandleUpdateChange={ this.handleUpdateChange }\n\t\t\t\t\t\t\tforcePublish={ this.state.forcePublish }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<UnlinkFromDiscourse\n\t\t\t\t\t\t\tpublished={ this.state.published }\n\t\t\t\t\t\t\thandleUnlinkFromDiscourseChange={\n\t\t\t\t\t\t\t\tthis.handleUnlinkFromDiscourseChange\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbusy={ this.state.busyUnlinking }\n\t\t\t\t\t\t\tforcePublish={ this.state.forcePublish }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tactions = null;\n\t\t\t}\n\t\t\treturn (\n\t\t\t\t<Fragment>\n\t\t\t\t\t<PluginSidebarMoreMenuItem target=\"discourse-sidebar\">\n\t\t\t\t\t\t{ __( 'Discourse', 'wp-discourse' ) }\n\t\t\t\t\t</PluginSidebarMoreMenuItem>\n\t\t\t\t\t<PluginSidebar\n\t\t\t\t\t\tname=\"discourse-sidebar\"\n\t\t\t\t\t\ttitle={ __( 'Discourse', 'wp-discourse' ) }\n\t\t\t\t\t>\n\t\t\t\t\t\t<PanelBody>\n\t\t\t\t\t\t\t<div className={ 'wpdc-sidebar' }>\n\t\t\t\t\t\t\t\t<Notification\n\t\t\t\t\t\t\t\t\tpublished={ this.state.published }\n\t\t\t\t\t\t\t\t\tforcePublish={ this.state.forcePublish }\n\t\t\t\t\t\t\t\t\tpublishingError={\n\t\t\t\t\t\t\t\t\t\tthis.state.publishingError\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tdiscoursePermalink={\n\t\t\t\t\t\t\t\t\t\tthis.state.discoursePermalink\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tstatusMessage={ this.state.statusMessage }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t{ actions }\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</PanelBody>\n\t\t\t\t\t</PluginSidebar>\n\t\t\t\t</Fragment>\n\t\t\t);\n\t\t}\n\t\treturn null;\n\t}\n}\n\nconst HOC = compose( [\n\twithSelect(\n\t\t(\n\t\t\tselect,\n\t\t\t{\n\t\t\t\t/*forceIsSaving*/\n\t\t\t}\n\t\t) => {\n\t\t\tconst { getCurrentPostId, getCurrentPost } =\n\t\t\t\tselect( 'core/editor' );\n\t\t\treturn {\n\t\t\t\tpostId: getCurrentPostId(),\n\t\t\t\tpost: getCurrentPost(),\n\t\t\t};\n\t\t}\n\t),\n\twithDispatch( ( dispatch ) => {\n\t\tconst { editPost } = dispatch( 'core/editor' );\n\t\treturn {\n\t\t\tsetAutoPublishOverridden( value ) {\n\t\t\t\teditPost( { meta: { wpdc_auto_publish_overridden: value } } );\n\t\t\t},\n\t\t};\n\t} ),\n] )( DiscourseSidebar );\n\nregisterPlugin( 'discourse-sidebar', {\n\ticon: iconEl,\n\trender: HOC,\n} );\n"],"names":["__","wp","i18n","PluginSidebar","PluginSidebarMoreMenuItem","editor","PanelBody","components","Component","Fragment","element","withSelect","withDispatch","data","compose","registerPlugin","plugins","el","createElement","iconEl","width","height","src","pluginOptions","logo","class","buttonClass","activeButtonClass","downArrow","_jsxs","className","viewBox","xmlns","role","focusable","children","_jsx","fill","d","upArrow","tagsFilterRegExp","Notification","render","ForcePublishMessage","forcePublish","props","published","StatusMessage","statusMessage","ErrorMessage","publishingError","DiscoursePermalink","discoursePermalink","message","permalink","encodeURI","link","href","target","rel","PublishingOptions","constructor","handleChange","bind","e","handlePublishMethodChange","value","htmlFor","id","type","name","checked","publishingMethod","onChange","PublishToDiscourse","handleToBePublishedChange","handlePublishChange","publishToDiscourse","publishedOnWordPress","postStatus","busy","onClick","CategorySelect","handleCategoryChange","discourseCategories","cats","Object","values","options","map","cat","index","selected","parseInt","category_id","categoryError","LinkToDiscourseTopic","state","isBusy","topicUrl","handleClick","setState","handleLinkTopicClick","UnlinkFromDiscourse","showPanel","togglePanel","handleUnlinkFromDiscourseChange","UpdateDiscourseTopic","handleUpdateChange","TagTopic","chosenTags","tags","inputContent","inputLength","maxTagsExceeded","handleKeyPress","focusInput","keyDown","tagInput","focus","keyCode","val","length","keyVal","key","currentChoices","maxTags","cleanTag","push","sanitizeArray","handleTagChange","trim","replace","RegExp","indexOf","splice","arr","sort","reduce","accumulator","current","allowTags","maxTagsNotice","tagDisplay","tag","onKeyDown","tabIndex","size","onKeyPress","ref","input","PinTopic","pinTopic","pinUntil","handleUpdateDate","handleToBePinnedChange","handlePinChange","DiscourseSidebar","initializePostMeta","initializePostState","post","getDiscourseCategories","componentDidUpdate","prevProps","isAllowedPostType","publishedPostHasChanged","updatePostState","prev","meta","status","every","s","some","attr","setAutoPublishOverridden","autoPublish","publishPostCategory","defaultCategory","topicTags","discoursePostId","busyUnlinking","busyUpdating","busyLinking","busyPublishing","assign","buildPostState","wpdc_topic_tags","split","postState","determinePublishToDiscourse","discourse_post_id","wpdc_pin_topic","publish_post_category","wpdc_pin_until","discourse_permalink","wpdc_publishing_error","autoPublishOverridden","wpdc_auto_publish_overridden","includes","wpdc_publish_to_discourse","pluginUnconfigured","apiRequest","path","method","get_categories_nonce","postId","then","allowedPostTypes","set_publish_meta_nonce","publish_to_discourse","categoryId","set_category_meta_nonce","set_pin_meta_nonce","tagString","join","set_tag_meta_nonce","link_topic_nonce","topic_url","err","responseJSON","unlink_post_nonce","publish_topic_nonce","success","publish_response","update_topic_nonce","response","update_response","isPublished","actions","title","HOC","select","getCurrentPostId","getCurrentPost","dispatch","editPost","icon"],"sourceRoot":""}