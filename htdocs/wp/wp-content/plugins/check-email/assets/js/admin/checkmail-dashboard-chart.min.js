document.addEventListener("DOMContentLoaded",function(){var a=checkmail_chart.ajax_url,e=checkmail_chart.ck_mail_security_nonce;let t;function l(a){let e=document.getElementById("checkmail-dashboard-chart").getContext("2d");t&&t.destroy(),t=new Chart(e,{type:"line",data:{labels:a.labels,datasets:[{label:"Emails Sent",data:a.sent,borderColor:"green",fill:!1},{label:"Failed Emails",data:a.failed,borderColor:"red",fill:!1},]},options:{responsive:!0,plugins:{legend:{display:!0}}}}),jQuery("#js_checkmail_total").html(a.total_mail+" Total"),jQuery("#js_checkmail_sent").html(a.total_sent+" Sent"),jQuery("#js_checkmail_failed").html(a.total_failed+" Failed")}function n(t=7){fetch(a+"?action=get_email_analytics&ck_mail_security_nonce="+e+"&ck_days="+t).then(a=>a.json()).then(a=>{l(a)}).catch(a=>{console.error("Error fetching chart data:",a)})}l({labels:[],sent:[],failed:[],total_mail:0,total_sent:0,total_failed:0}),jQuery("#checkmail-dashboard-date-range").change(function(){n(jQuery(this).val())}),n(7)});